<!DOCTYPE html>
<html lang="ru-ru"><head>
    <title>ПОСТРОЕНИЕ СИСТЕМЫ АГРЕГИРОВАНИЯ ИНФОРМАЦИИ</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="" />
    <style>
@import "https://fonts.googleapis.com/css2?family=Inconsolata&display=swap";:root{--cursor-visibility:hidden}html,body{width:100%;height:100%;overflow:auto;font-family:inconsolata,monospace;font-size:4vmin;line-height:4.1vmin;font-weight:400}body{margin:0;display:flex;flex-direction:row;justify-content:center;align-items:center}#content{min-width:82vmin;min-height:82vmin}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 0 1px white}::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:0 0 0 1px white}.cursor,#activity-title:after,#activity-content:after,#cd:after,#whoami:after,#cat:after,#tree:after{visibility:var(--cursor-visibility);content:"|";overflow:hidden;color:#fff;animation:blink 500ms linear infinite alternate}@keyframes blink{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:768px){body{font-size:2.5vmin;line-height:2.6vmin}#content{min-width:60vmin}}:root{--cursor-visibility:hidden}body{align-items:unset;overflow-y:scroll}#content{max-width:80vmin}pre{overflow-x:scroll;white-space:pre}@keyframes blink{0%{opacity:0}100%{opacity:1}}















    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
        
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    



body{background:#1b1d1e}body #terminal{color:#BBBBBB}body #user{color:#23E298}body #dir{color:#D08010}body .Typewriter__cursor{color:#BBBBBB}a{color:#BBBBBB}

        
.navFull {
    background-color: #353535;
    font-family: "Courier New";
    font-size: 17px;
    display: inline;
    position: fixed;
    bottom: 0px;
    left: 0px;
    width: 100%;
    padding-top: 5px;
    padding: 10px;
    padding-bottom: 0px;
}

.navCredits {
    float: right;
    padding-right: 18px;
    padding-bottom: 10px;
    padding-top: 5px;
}

#content::after {
    content: "\a\a";
    white-space: pre;
}
        
        
</style>



    <meta name="yandex-verification" content="355904de153d5134" />
    

<script>window.yaContextCb=window.yaContextCb||[]</script>
<script src="https://yandex.ru/ads/system/context.js" async></script>

<script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
 
    ym(90533415, "init", {
         clickmap:true,
         trackLinks:true,
         accurateTrackBounce:true
    });
 </script>
 <noscript><div><img src="https://mc.yandex.ru/watch/90533415" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
 


</head><body><div id="content">
<div id="block">

    <div id="yandex_rtb_R-A-1957258-2"></div>
    <script>window.yaContextCb.push(() => {
            Ya.Context.AdvManager.render({
                renderTo: 'yandex_rtb_R-A-1957258-2',
                blockId: 'R-A-1957258-2'
            })
        })</script>
</div>
    
    
    



    


    <span id="activity-title"></span> <br>
 <span id="activity-content"></span> <br>

<script type="text/javascript">
    async function typewriter(text, elementId, waitAfter) {
        var n = 0,
            isTag = false
        addText = "";
        const el = document.getElementById(elementId);

        const wait = () => new Promise(r => setTimeout(r, waitAfter));
        const nowait = () => new Promise(r => r());

        const render = () => el.innerHTML = (text.slice(0, n + 1) + addText);

        const cursor = document.createElement('span');
        cursor.id = "blink";

        el.style.setProperty("--cursor-visibility", "visible");
        while (n < text.length) {
            if (text.charAt(n + 1) === "<") isTag = true;
            if (text.charAt(n + 1) === ">") isTag = false;

            if (isTag) {
                n++;
                continue;
            }

            requestAnimationFrame(render);

            if (waitAfter === 0) {
                await nowait();
            } else {
                await wait();
            }

            n++;
        }
        el.style.setProperty("--cursor-visibility", "collapse");
    }

    function parseDelay(d) {
        const parsed = parseInt(d, 10);
        if (isNaN(parsed)) return 0;
        return parsed;
    }

    const titleDelay = parseDelay("0"),
        contentDelay = parseDelay("0");
    const typeeffetct = async () => {
        await typewriter("\u003cspan id=\u0027terminal\u0027\u003e\u003ch1 id=\u0027title\u0027\u003eПОСТРОЕНИЕ СИСТЕМЫ АГРЕГИРОВАНИЯ ИНФОРМАЦИИ\u003c\/h1\u003e\u003cspan id=\u0027date\u0027\u003e2018-05-01 00:00:59 \u002b0300 MSK\u003c\/span\u003e\u003c\/span\u003e", "activity-title", titleDelay);
        await typewriter("\u003cspan id=\u0027\u0027\u003e\u003cp\u003e\u003ca href=\u0022http:\/\/journal.tc22.ru\/wp-content\/uploads\/2018\/05\/postroenie_sistemi_agregirovaniya_informacii.pdf\u0022\u003eОригинал статьи\u003c\/a\u003e. Статья была написана в рамках моего обучения в магистратуре.\u003c\/p\u003e\n\u003chr\u003e\n\u003cp\u003eВ современном мире, где объемы данных, поступающие в информационные системы, имеют тенденцию к постоянному росту, а отдельное клиентское устройство зачастую не способно совершать выборку и обработку всех необходимых данных режиме реального времени, вопрос построения систем агрегирования информации встает все более остро.\u003c\/p\u003e\n\u003cp\u003eЧто же представляет из себя система агрегирования информации в сети Интернет? Согласно [4], система агрегации это способ создания новых web-приложений за счет объединения уже существующих интернетресурсов.\u003c\/p\u003e\n\u003cp\u003eЗачастую, подобного рода системы проектируются как горизонтально масштабируемые системы [1] и служат надстройкой над API некоторых web-сервисов с целью получения больших выборок данных за время меньшее, чем если бы это делалось средствами отдельно взятого устройства [5]. Под масштабируемостью принято понимать способность системы увеличивать свою производительность при добавлении в систему ресурсов.\u003c\/p\u003e\n\u003cp\u003eРазличают понятия горизонтальной и вертикальной масштабируемости. Вертикальная масштабируемость – способность системы увеличить общую производительность при увеличении производительности отдельных ее элементов. Горизонтальная масштабируемость – способность системы увеличивать производительность при увеличении количества элементов, участвующих в обработке информации [3].\u003c\/p\u003e\n\u003cp\u003eВ данной статье содержатся положения касаемо построения модели взаимодействия компонентов горизонтально масштабируемой системы доступа к удаленным информационным ресурсам в контексте использования данной системы в качестве агрегирующего сервиса. На построенной модели проведено исследование оптимальной конфигурации горизонтально масштабируемого слоя системы. Данный подход позволяет в рамках одной модели отразить как взаимодействие пользователя с данной системой, так и взаимодействие отдельных компонентов системы между собой.\u003c\/p\u003e\n\u003cp\u003eСистемы агрегации информации (в западной технической литературе [4,5] устоялся термин «mashupсистемы») строятся на основе горизонтально масштабируемых систем [2]. В рамках архитектуры «клиентсервер» подобная система может соответствовать архитектуре, представленной на рисунке 1.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022\/asserts\/images\/agregate_1.png\u0022 alt=\u0022Рис. 1. Архитектура «клиент-сервер» с горизонтально масштабируемым слоем\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eРис. 1. Архитектура «клиент-сервер» с горизонтально масштабируемым слоем\u003c\/p\u003e\n\u003cp\u003eОдин из вариантов архитектуры горизонтально масштабированного слоя представлен на изображении (рис.2). Пользователь формирует абстрактный запрос к контролеру горизонтально масштабированного слоя, затем контролер горизонтально масштабируемого слоя обрабатывает запрос, произведя разложение на некоторое количество подзапросов (в случае необходимо), которые могут быть удовлетворены API сервиса и переданы в виде задач другим серверам системы. Связанные с контролером серверы выполняют запрос к удаленному серверу и, получив ответ, передают его контролеру горизонтально масштабируемого слоя, который объединяет ответы, полученные от подчиненных серверов, передает агрегированный результат клиенту.\u003c\/p\u003e\n\u003cp\u003e\u003cimg src=\u0022\/asserts\/images\/agregate_2.png\u0022 alt=\u0022Рис. 2. Архитектура горизонтально масштабируемого слоя\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eРис. 2. Архитектура горизонтально масштабируемого слоя\u003c\/p\u003e\n\u003cp\u003eДля выявления устойчивой к заявленным нагрузкам конфигурации горизонтально масштабируемого слоя в среде имитационного моделирования AnyLogic разработана модель, представленная на рисунке 3. Модель представляет собой набор логических элементов. Элемент source выступает в качестве генератора запросов, delay и delay1 используются для моделирования временной задержки. Сущность resourcePool является хранилищем ресурсов (в данном случае количества потоков), сущность seize хранит заданное количество запросов и при достаточном количестве ресурсов, передает запрос далее.\u003c\/p\u003e\n\u003cp\u003eВ случае невозможности обработки запроса, запрос уничтожается в сущности sink. Сущность sink1 также используется для уничтожения запросов, по завершению работы цикла.\u003c\/p\u003e\n\u003cp\u003eДля моделирования предложена ситуация, когда горизонтально масштабируемый слой используется в качестве сервиса, а интенсивность запросов, заложенная в source, составляет случайное значение согласно треугольному распределению [6] от 1 до 20 с наиболее вероятным значением, составляющим 5 запросов в минуту.\u003c\/p\u003e\n\u003cp\u003eМоделирование включает три этапа:\u003c\/p\u003e\n\u003col\u003e\n\u003cli\u003eМоделирование работы контроллера и удаленного сервера. В рамках этапа моделируется обработка 3 запроса контроллером и удаленным сервером, работа контроллера по разделению первичного запроса. Время на обработку запроса контролером (delay1) и удаленным сервером (delay) заложено как случайное значение согласно треугольному распределению от 0.5 до 5 с наиболее вероятным значением 1 секунда на обработку одного запроса. Блок split используется для моделирования работы контролера по разделению первичного запроса к горизонтально масштабируемому слою на запросы, которые необходимо совершить к API удаленного сервиса. После разделения, оригинальный запрос перемещается в sink.\u003c\/li\u003e\n\u003c\/ol\u003e\n\u003cp\u003e\u003cimg src=\u0022\/asserts\/images\/agregate_3.png\u0022 alt=\u0022Рис. 3. Модель горизонтально масштабируемого слоя как сервиса\u0022\u003e\u003c\/p\u003e\n\u003cp\u003eРис. 3. Модель горизонтально масштабируемого слоя как сервиса\u003c\/p\u003e\n\u003col start=\u00222\u0022\u003e\n\u003cli\u003e\n\u003cp\u003eМоделирование работы горизонтально масштабированного слоя. Работа серверов горизонтально\nмасштабируемого слоя, которым контролер ставит в соответствие задачи, реализуется блоками resourcePool, release и seize. Элемент resourcePool представляет собой набор потоков, доступных в горизонтально масштабируемом слое для запроса к API удаленного сервера и рассчитывается как Servers*10, где Servers это количество серверов в горизонтально масштабируемом слое используемых для решения задач, полученных от контроллера. Каждый сервер обладает потенциалом обработки 10 одновременных потоков, поэтому размер очереди блока seize рассчитывается аналогично.\u003c\/p\u003e\n\u003c\/li\u003e\n\u003cli\u003e\n\u003cp\u003eМоделирование потоков. Освобождение потоков происходит после получения ответа от удаленного сервера. Возвращение ресурсов (свободных потоков) в resourcePool моделируется блоком release. Если блок seize не может обработать поступивший запрос или поместить его в очередь, то запрос поступает в sink2.\u003c\/p\u003e\n\u003c\/li\u003e\n\u003c\/ol\u003e\n\u003cp\u003eДля данной модели, приняты следующие допущения: оптимальным количеством серверов считается такое количество серверов в горизонтально масштабируемом слое, при котором не один из запросов, назначенных контроллером горизонтально масштабируемого слоя, не будет отклонен. Также, в рамках модели, все серверы в горизонтально масштабируемом слое считаются одинаково сконфигурированными и имеющими десять потоков.\u003c\/p\u003e\n\u003cp\u003eВ результате моделирования получена таблица, которая содержит значения оптимального количества серверов в горизонтально масштабируемом слое:\u003c\/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\u0022text-align:center\u0022\u003eКоэффициент деления первичного запроса\u003c\/th\u003e\n\u003cth style=\u0022text-align:center\u0022\u003eОптимальное количество серверов в горизонтально масштабируемом слое\u003c\/th\u003e\n\u003c\/tr\u003e\n\u003c\/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e10\u003c\/td\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e2\u003c\/td\u003e\n\u003c\/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e50\u003c\/td\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e10\u003c\/td\u003e\n\u003c\/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e100\u003c\/td\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e20\u003c\/td\u003e\n\u003c\/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e500\u003c\/td\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e87\u003c\/td\u003e\n\u003c\/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e100\u003c\/td\u003e\n\u003ctd style=\u0022text-align:center\u0022\u003e149\u003c\/td\u003e\n\u003c\/tr\u003e\n\u003c\/tbody\u003e\n\u003c\/table\u003e\n\u003cp\u003eКак можно видеть из таблицы, оптимальное количество серверов в горизонтально масштабируемом слое нелинейно зависит от коэффициента изначального запроса. Проведем интерполяцию степенным многочленом. Известно, что через \u003ccode\u003en\u002b1\u003c\/code\u003e точек на плоскости можно провести кривую, являющуюся графиком степенного многочлена (полинома) степени n, причем такой полином единственный. Воспользуемся следующей формулой:\u003c\/p\u003e\n\u003cp\u003e$L(x) =\\sum_{i=0}^{n} y_il_i(x)$\u003c\/p\u003e\n\u003cp\u003e$l_i(x) = \\prod_{{j=0},{j\\neq i}}^{n} {(x-x_j) \\over x_i-x_j}$\u003c\/p\u003e\n\u003cp\u003eЗа $x_i$ примем коэффициент деления первичного запроса, за $y_i$ – оптимальное количество серверов в горизонтально масштабируемом слое при заданной величине коэффициента деления первичного запроса.\u003c\/p\u003e\n\u003cp\u003eПодставив значения в формулы получаем следующую зависимость:\n$f(x) = 1.76571 *  10^{-8}x^3 - 0.0000767385x^2 \u002b 0.208204x − 0.122419 $, где $x$ это количество запросов, на которые будет разделен первичный запрос, а $f(x)$ - количество серверов, которое потребуется, чтобы все запросы были обработаны. Убедимся в корректности полученной для модели формулы на точках, не участвовавших в выявлении зависимости. Так, при разделении первичного запроса на 25 подзапросов получаем:\u003c\/p\u003e\n\u003cp\u003e$ 1.76571 * 10^{−8}x^3 − 0.0000767385x^2 \u002b 0.208204x − 0.122419 ≈ 5.035$\u003c\/p\u003e\n\u003cp\u003eПроведя моделирование при наличии пяти серверов, получающих задания от контролера горизонтально масштабированного слоя, убеждаемся в том, что модель работает корректно и все запросы были обработаны. При расщеплении изначального запроса на 127 запросов получаем:\u003c\/p\u003e\n\u003cp\u003e$1.76571 * 10^{−8}x^3 − 0.0000767385x^2 \u002b 0.208204x − 0.122419 ≈ 25.1179. $\nПроведя моделирование на двадцати пяти серверах, получающих задания от контролера горизонтально масштабированного слоя, убеждаемся в том, что модель работает корректно и все запросы были обработаны.\u003c\/p\u003e\n\u003cp\u003eТаким образом, в работе построена аппроксимирующая функция для системы агрегирования информации и математическая зависимость коэффициента деления первоначального запроса и количества серверов в горизонтально масштабируемом слое, необходимого для их обработки. Использование данной модели и математической зависимости позволит оценить устойчивость подобных систем к заявленным нагрузкам до непосредственного введения их в эксплуатацию.\u003c\/p\u003e\n\u003cp\u003eСписок литературы\u003c\/p\u003e\n\u003chr\u003e\n\u003col\u003e\n\u003cli\u003eКосяков М.С. Введение в распределенные вычисления \/ Учебное пособие. – Санкт-Петербург: НИУ ИТМО, 2014. - 155 с.\u003c\/li\u003e\n\u003cli\u003eРадченко Г.И. Распределенные вычислительные системы \/ Г.И. Радченко. – Челябинск:Фотохудожник, 2012. – 184 с.\u003c\/li\u003e\n\u003cli\u003eШамакина А. В. Обзор технологий распределенных вычислений \/\/ Вестник ЮУрГУ. Серия: Вычислительная математика и информатика. 2014. №3 С.51-85.\u003c\/li\u003e\n\u003cli\u003eBaker M., Buyya R., Laforenza D. Grids and Grid Technologies for Wide–area Distributed Computing \/\/ Journal of Software-Practice \u0026amp; Experience. 2002. Vol. 32, No. 15. P. 1437–1466\u003c\/li\u003e\n\u003cli\u003eBenslimane D., Dustdar S., Sheth A. Services Mashups: The New Generation of Web Applications \/\/ IEEE Internet Computing. 2008. Vol. 12. doi: 10.1109\/MIC.2008.110\u003c\/li\u003e\n\u003cli\u003eHelp - AnyLogic Simulation Software [Электронный ресурс] \/ triangular. – \u003ca href=\u0022https:\/\/help.anylogic.ru\/index.jsp?topic=%2Fcom.anylogic.help%2Fhtml%2Ffunctions%2Ftriangular.html\u0022\u003ehttps:\/\/help.anylogic.ru\/index.jsp?topic=%2Fcom.anylogic.help%2Fhtml%2Ffunctions%2Ftriangular.html\u003c\/a\u003e (дата обращения: 20.12.2017)\u003c\/li\u003e\n\u003c\/ol\u003e\n\u003c\/span\u003e", "activity-content", contentDelay);
        return;
    }

    typeeffetct()
</script>



    </div>
    <style>
    h1 {
         
        color: #23E298;
        line-height: 6vmin;
        font-size: 6vmin;
    }

    
    #block {
        max-height: 200px;
    }
    ul ::marker {
        
        content: "-rw-rw-r--";

    }

    a, strong, ::marker,
    #date {
        color: #D08010;

    }
    table, td{
        border-collapse: collapse;
        border: 2px solid #D08010;
    }
    td{
        padding: 25px;
    }
    li a {
        font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
        font-size: 0.5rem;
        line-height: 1.56;
    }

    li {
        padding-left: 2%;


    }
    a{
        text-decoration: none;
    }
    img{
        max-width: 100%;
    }
    #activity-content {
        font-size: 0.5rem;
        line-height: 1.56;
        overflow-wrap: break-word;
        font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
    }
    #content{
        color:#BBBBBB;
    }
</style>


    
    <span class="navFull">
        
    
    

    
        

<span>
    <a href="/">Home</a>
    <span>&#8192;|&#8192;</span>
    <a href="./..">/articles/</a>
</span>

    

        
        <span class="navCredits">
            Hugo theme created by
            <a href="https://github.com/Yukuro/hugo-theme-shell" target="_blank" rel="noopener">Yukuro</a>
        </span>
</span>


    

    

</body>

</html>